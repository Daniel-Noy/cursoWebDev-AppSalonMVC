{"version":3,"sources":["app.js"],"names":["paso","pasoInicial","pasoFinal","cita","id","nombre","fecha","hora","servicios","iniciarApp","mostrarSeccion","tabs","botonesPaginador","paginaSiguiente","paginaAnterior","consultarAPI","idCliente","nombreCliente","seleccionarFecha","seleccionarHora","mostrarResumen","seccionAnterior","document","querySelector","classList","remove","add","tabAnterior","querySelectorAll","forEach","boton","addEventListener","e","target","parseInt","dataset","paginaAnt","paginaSig","async","url","location","origin","res","fetch","mostrarServicios","json","err","console","log","servicio","precio","nombreServicio","createElement","textContent","precioServicio","servicioDiv","idServicio","appendChild","onclick","seleccionarServicio","divServicio","some","agregado","filter","inputId","value","inputNombre","fechaFormateada","formatearFecha","inputFecha","setAttribute","dia","Date","getDay","includes","mostrarAlerta","horaCita","split","resumenDiv","firstChild","removeChild","Object","values","length","aviso","className","headingServicios","totalServicios","innerHTML","parseFloat","fechaObj","getDate","mes","getMonth","year","getFullYear","UTC","toLocaleDateString","weekday","day","month","total","headingCita","fechaCita","botonReservar","reservarCita","idServicios","map","datos","FormData","append","method","body","resultado","Swal","fire","then","window","reload","icon","title","text","fechaActual","toLocaleString","mensaje","tipo","alerta","setTimeout"],"mappings":"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","file":"app.js","sourcesContent":["let paso = 1;\r\nconst pasoInicial = 1;\r\nconst pasoFinal = 3;\r\n\r\nconst cita = {\r\n    id: '',\r\n    nombre: '',\r\n    fecha: '',\r\n    hora: '',\r\n    servicios: []\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', ()=> {\r\n    iniciarApp();\r\n})\r\n\r\nfunction iniciarApp() {\r\n    mostrarSeccion();   //* Muestra la seccion inicial al entrar a la app\r\n\r\n    tabs();             //* Cambia la seccion cuando se presionan los tabs\r\n    botonesPaginador(); //* Agrega o quita los botones del paginador\r\n    paginaSiguiente();  //* Cambia a la pagina sig\r\n    paginaAnterior();   //* Cambia a la pagina anterior\r\n    \r\n    consultarAPI();     //* Consulta la API del Backend\r\n\r\n    idCliente();\r\n    nombreCliente();\r\n    seleccionarFecha();\r\n    seleccionarHora();\r\n\r\n    mostrarResumen();\r\n}\r\n\r\nfunction mostrarSeccion() {\r\n    const seccionAnterior = document.querySelector('.seccion.mostrar');\r\n    if(seccionAnterior) {\r\n        seccionAnterior.classList.remove('mostrar');\r\n    }\r\n    \r\n    const seccion = document.querySelector(`#paso-${paso}`);\r\n    seccion.classList.add('mostrar');\r\n\r\n    // Desmarca el tab anterior si es que existe\r\n    const tabAnterior = document.querySelector('.actual') ?? null;\r\n    if(tabAnterior) {\r\n        tabAnterior.classList.remove('actual');\r\n    }\r\n    \r\n    // Resalta el tab actual\r\n    const tab = document.querySelector(`[data-paso=\"${paso}\"]`);\r\n    tab.classList.add('actual');\r\n}\r\n\r\nfunction tabs() {\r\n    const botones = document.querySelectorAll('.tabs button');\r\n\r\n    botones.forEach( boton => {\r\n        boton.addEventListener('click', (e)=> {\r\n            const boton = e.target;\r\n            paso = parseInt(boton.dataset.paso);\r\n            mostrarSeccion();\r\n            botonesPaginador();\r\n\r\n        })\r\n    })\r\n}\r\n\r\nfunction botonesPaginador() {\r\n    const paginaAnt = document.querySelector('#anterior');\r\n    const paginaSig = document.querySelector('#siguiente');\r\n\r\n    if(paso === pasoInicial) {\r\n        paginaAnt.classList.add('ocultar');\r\n        paginaSig.classList.remove('ocultar');\r\n    } \r\n    if (paso === pasoFinal) {\r\n        paginaAnt.classList.remove('ocultar');\r\n        paginaSig.classList.add('ocultar');\r\n\r\n        mostrarResumen();\r\n    }\r\n    if(paso > pasoInicial && paso < pasoFinal) {\r\n        paginaSig.classList.remove('ocultar');\r\n        paginaAnt.classList.remove('ocultar');\r\n    }\r\n    mostrarSeccion();\r\n} \r\n\r\n\r\nfunction paginaAnterior() {\r\n    const paginaAnterior = document.querySelector('#anterior');\r\n    paginaAnterior.addEventListener('click', ()=> {\r\n        if(paso === pasoInicial) return;\r\n\r\n        paso--;\r\n        botonesPaginador();\r\n    })\r\n}\r\n\r\nfunction paginaSiguiente() {\r\n    const paginaSiguiente = document.querySelector('#siguiente');\r\n    paginaSiguiente.addEventListener('click', ()=> {\r\n        if(paso === pasoFinal) return;\r\n\r\n        paso++;\r\n        botonesPaginador();\r\n    })\r\n}\r\n\r\nasync function consultarAPI() {\r\n\r\n    try {\r\n        const url = `${location.origin}/api/servicios`;\r\n        const res = await fetch(url);\r\n        const servicios = await res.json();\r\n        mostrarServicios(servicios)\r\n\r\n\r\n    }  catch (err) {\r\n        console.log(err);\r\n    }\r\n}\r\n\r\nfunction mostrarServicios(servicios) {\r\n    servicios.forEach(servicio => {\r\n        const {id, nombre, precio} = servicio;\r\n\r\n        const nombreServicio = document.createElement('P');\r\n        nombreServicio.classList.add('nombre-servicio');\r\n        nombreServicio.textContent = nombre;\r\n\r\n        const precioServicio = document.createElement('P');\r\n        precioServicio.classList.add('precio-servicio');\r\n        precioServicio.textContent = `$${precio}`;\r\n\r\n        const servicioDiv = document.createElement('DIV');\r\n        servicioDiv.classList.add('servicio');\r\n        servicioDiv.dataset.idServicio = id;\r\n\r\n        servicioDiv.appendChild(nombreServicio);\r\n        servicioDiv.appendChild(precioServicio);\r\n        servicioDiv.onclick = ()=> {\r\n            seleccionarServicio(servicio)\r\n        };\r\n\r\n        const seccionServicios = document.querySelector('#servicios');\r\n        seccionServicios.appendChild(servicioDiv);\r\n    })\r\n}\r\n\r\nfunction seleccionarServicio(servicio) {\r\n    const { id } = servicio;\r\n    const { servicios } = cita;\r\n    const divServicio = document.querySelector(`[data-id-servicio=\"${id}\"]`);\r\n    \r\n    if(servicios.some( agregado => agregado.id === id )) {\r\n        cita.servicios = servicios.filter( agregado => agregado.id !== id)\r\n        divServicio.classList.remove('seleccionado');\r\n    } else {\r\n        cita.servicios = [...servicios, servicio];\r\n        divServicio.classList.add('seleccionado');\r\n    }\r\n}\r\n\r\nfunction idCliente() {\r\n    const inputId = document.querySelector('#id');\r\n    cita.id = inputId.value;\r\n}\r\n\r\nfunction nombreCliente() {\r\n    const inputNombre = document.querySelector('#nombre');\r\n    inputNombre.addEventListener('change', e => {\r\n        cita.nombre = inputNombre.value;\r\n    })\r\n    cita.nombre = inputNombre.value;\r\n}\r\n\r\nfunction seleccionarFecha() {\r\n    const fechaFormateada = formatearFecha();\r\n    cita.fecha = fechaFormateada;\r\n\r\n    const inputFecha = document.querySelector('#fecha');\r\n    inputFecha.value = fechaFormateada;\r\n    inputFecha.setAttribute('min', fechaFormateada);\r\n\r\n    \r\n    inputFecha.addEventListener('change', (e)=> {\r\n        const dia = new Date(e.target.value).getDay();\r\n        \r\n        if ( [5,6].includes(dia) ) {\r\n            e.target.value = '';\r\n            mostrarAlerta(\"Los sabados y domingos no abrimos\", \"error\");\r\n        } else {\r\n            cita.fecha = e.target.value;\r\n        }\r\n    })\r\n}\r\n\r\nfunction seleccionarHora() {\r\n    const inputHora = document.querySelector('#hora');\r\n    inputHora.addEventListener( 'change', e => {\r\n\r\n        const horaCita = e.target.value;\r\n        const hora = horaCita.split(':')[0];\r\n\r\n        if( parseInt(hora) < 10 || parseInt(hora) > 18 ) {\r\n            e.target.value = '';\r\n            mostrarAlerta('Abrimos a las 10:00 AM y cerramos a las 06:00 PM', 'error');\r\n        } else {\r\n            cita.hora = horaCita;\r\n        }\r\n\r\n    })\r\n}\r\n\r\nfunction mostrarResumen() {\r\n    const resumenDiv = document.querySelector('#paso-3 .resumen');\r\n    \r\n    while (resumenDiv.firstChild) {\r\n        resumenDiv.removeChild(resumenDiv.firstChild)\r\n    }\r\n\r\n    if (Object.values(cita).includes('') || cita.servicios.length === 0) {\r\n        const aviso = document.createElement('H2');\r\n        aviso.className = \"aviso\";\r\n        aviso.textContent = \"Llena todos los datos para continuar\";\r\n        \r\n        resumenDiv.appendChild(aviso);\r\n\r\n        return\r\n    }    \r\n    \r\n    const {nombre, fecha, hora, servicios} = cita;\r\n    const headingServicios = document.createElement('H3');\r\n    headingServicios.textContent = \"Resumen de servicios\";\r\n    resumenDiv.appendChild(headingServicios);\r\n    let totalServicios = 0;\r\n\r\n    servicios.forEach( servicio => {\r\n        const {precio, nombre} = servicio;\r\n        const servicioDiv = document.createElement('DIV');\r\n        servicioDiv.className = \"contenedor-servicio\";\r\n\r\n        const nombreServicio = document.createElement('P');\r\n        nombreServicio.textContent = nombre;\r\n\r\n        const precioServicio = document.createElement('P');\r\n        precioServicio.innerHTML = `<span>Precio:</span> $${precio}`;\r\n\r\n        servicioDiv.appendChild(nombreServicio);\r\n        servicioDiv.appendChild(precioServicio);\r\n\r\n        resumenDiv.appendChild(servicioDiv);\r\n        totalServicios += parseFloat(precio);\r\n\r\n    })\r\n\r\n    const fechaObj = new Date(fecha);\r\n    const dia = fechaObj.getDate() + 2;\r\n    const mes = fechaObj.getMonth();\r\n    const year = fechaObj.getFullYear();\r\n\r\n    const fechaUTC = new Date(Date.UTC(year, mes, dia));\r\n    const fechaFormateada = fechaUTC.toLocaleDateString('es-MX', {\r\n        weekday: 'long',\r\n        day: '2-digit',\r\n        year: 'numeric',\r\n        month: 'long'\r\n    })\r\n\r\n    const total = document.createElement('P');\r\n    total.innerHTML = `<span>Total:</span> $${totalServicios}`;\r\n    resumenDiv.appendChild(total);\r\n\r\n    const headingCita = document.createElement('H3');\r\n    headingCita.textContent = \"Resumen de la cita\";\r\n    resumenDiv.appendChild(headingCita);\r\n\r\n    const nombreCliente = document.createElement('P');\r\n    nombreCliente.innerHTML = `<span class=\"resaltado\">Nombre:</span> ${nombre}`;\r\n    resumenDiv.appendChild(nombreCliente);\r\n    \r\n    const fechaCita = document.createElement('P');\r\n    fechaCita.innerHTML = `<span class=\"resaltado\">Fecha:</span> ${fechaFormateada}`;\r\n    resumenDiv.appendChild(fechaCita);\r\n    \r\n    const horaCita = document.createElement('P');\r\n    horaCita.innerHTML = `<span class=\"resaltado\">Hora:</span> ${hora}hrs`;\r\n    resumenDiv.appendChild(horaCita);\r\n\r\n    const botonReservar = document.createElement('BUTTON');\r\n    botonReservar.className = 'boton';\r\n    botonReservar.textContent = 'Reservar Cita';\r\n    botonReservar.onclick = reservarCita;\r\n    resumenDiv.appendChild(botonReservar);\r\n}\r\n\r\nasync function reservarCita() {\r\n    const {id, fecha, hora, servicios} = cita;\r\n    const idServicios = servicios.map(servicio => servicio.id);\r\n\r\n    const datos = new FormData();\r\n    datos.append('usuarioId', id);\r\n    datos.append('fecha', fecha);\r\n    datos.append('hora', hora);\r\n    datos.append('servicios', idServicios);\r\n\r\n    try {\r\n        // Peticion hacia la api\r\n        const url = `${location.origin}/api/citas`;\r\n        const res = await fetch(url, {\r\n            method: 'POST',\r\n            body: datos\r\n        })\r\n\r\n        const resultado = await res.json();\r\n        if(resultado.resultado) {\r\n            Swal.fire(\r\n                'Cita creada',\r\n                'Se ha agendado tu cita correctamente',\r\n                'success'\r\n            ).then(()=> {\r\n                window.location.reload();\r\n            })\r\n        }\r\n    } catch (err) {\r\n        Swal.fire({\r\n            icon: 'error',\r\n            title: 'Error',\r\n            text: 'Hubo un error al guardar la cita'\r\n        })\r\n}\r\n}\r\n\r\nfunction formatearFecha() {\r\n    const fechaActual = new Date();\r\n    const year = fechaActual.toLocaleString(\"default\", { year: \"numeric\" });\r\n    const mes = fechaActual.toLocaleString(\"default\", { month: \"2-digit\" });\r\n    const dia = fechaActual.toLocaleString(\"default\", { day: \"2-digit\" });\r\n\r\n    const fechaFormateada = `${year}-${mes}-${dia}`\r\n\r\n    return fechaFormateada;\r\n}\r\n\r\nfunction mostrarAlerta(mensaje, tipo) {\r\n    const alertaAnterior = document.querySelector('.alerta');\r\n    if( alertaAnterior ) return;\r\n\r\n    const alerta = document.createElement('DIV');\r\n    alerta.className = `alerta ${tipo}`;\r\n    alerta.textContent = mensaje\r\n\r\n    const formulario = document.querySelector('.formulario');\r\n    formulario.appendChild(alerta)\r\n\r\n    setTimeout(()=> {\r\n        alerta.remove();\r\n    }, 5000)\r\n}\r\n"]}